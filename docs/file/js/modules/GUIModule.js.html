<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">js/modules/GUIModule.js | &#x422;&#x430;&#x43F;&#x430;&#x43D;&#x434;&#x430;: &#x41C;&#x430;&#x43A;&#x435;&#x442;&#x43D;&#x430;&#x44F; &#x43F;&#x43B;&#x430;&#x442;&#x430;</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="&#x41F;&#x430;&#x43A;&#x435;&#x442; frontend-&#x440;&#x435;&#x448;&#x435;&#x43D;&#x438;&#x439; &#x434;&#x43B;&#x44F; &#x43F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x430; &#x427;&#x430;&#x441; &#x43A;&#x43E;&#x434;&#x430;"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="&#x422;&#x430;&#x43F;&#x430;&#x43D;&#x434;&#x430;: &#x41C;&#x430;&#x43A;&#x435;&#x442;&#x43D;&#x430;&#x44F; &#x43F;&#x43B;&#x430;&#x442;&#x430;"><meta property="twitter:description" content="&#x41F;&#x430;&#x43A;&#x435;&#x442; frontend-&#x440;&#x435;&#x448;&#x435;&#x43D;&#x438;&#x439; &#x434;&#x43B;&#x44F; &#x43F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x430; &#x427;&#x430;&#x441; &#x43A;&#x43E;&#x434;&#x430;"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a href="https://bitbucket.org/makeitlab/codehour-breadboard-web">Repository</a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/admin_blockly.js~AdminBlocklyApplication.html">AdminBlocklyApplication</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/admin_board.js~AdminBoardApplication.html">AdminBoardApplication</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/index.js~Application.html">Application</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#core">core</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Dispatcher.js~Dispatcher.html">Dispatcher</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Loggable.js~Loggable.html">Loggable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Module.js~Module.html">Module</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Wrapper.js~Wrapper.html">Wrapper</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#modules">modules</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/BreadboardModule.js~BreadboardModule.html">BreadboardModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/GUIModule.js~GUIModule.html">GUIModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/GlobalServiceModule.js~GlobalServiceModule.html">GlobalServiceModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/InstructorModule.js~InstructorModule.html">InstructorModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/LayoutModule.js~LayoutModule.html">LayoutModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/LocalServiceModule.js~LocalServiceModule.html">LocalServiceModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/LogModule.js~LogModule.html">LogModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/TracingModule.js~TracingModule.html">TracingModule</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/modules/WorkspaceModule.js~WorkspaceModule.html">WorkspaceModule</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/modules/GUIModule.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import Module from &quot;../core/Module&quot;;

import SpinnerWrapper from &quot;../wrappers/SpinnerWrapper&quot;;
import LessonPaneWrapper from &quot;../wrappers/LessonPaneWrapper&quot;;
import TextPaneWrapper from &quot;../wrappers/TextPaneWrapper&quot;;
import LaunchBtnWrapper from &quot;../wrappers/LaunchBtnWrapper&quot;;
import FileWrapper from &quot;../wrappers/FileWrapper&quot;;
import AlertifierWrapper from &quot;../wrappers/AlertifierWrapper&quot;;

const BOARD_STATUSES = {
    SEARCH: &apos;search&apos;,
    CONNECT: &apos;connect&apos;,
    DISCONNECT: &apos;disconnect&apos;,
    NONE: &apos;none&apos;,
};

const HASH_TYPES = {
    GOTO: &quot;goto&quot;,

    NONE: &quot;none&quot;,
};

const REGEXPS = {
    MISSION_EXERCISE:   /^#m[0-9]+e[0-9]+$/g,
    MISSION:            /^#m[0-9]+$/g,
    EXERCISE:           /^#e[0-9]+$/g,

    NUMBERS:            /[0-9]+/g,
};

const LAUNCH_VARIANTS = {
    NONE: 0,
    CHECK: 1,
    EXECUTE: 2,
    CHECK_N_EXECUTE: 3,
};

/**
 * &#x41C;&#x43E;&#x434;&#x443;&#x43B;&#x44C;, &#x443;&#x43F;&#x440;&#x430;&#x432;&#x43B;&#x44F;&#x44E;&#x449;&#x438;&#x439; &#x431;&#x430;&#x437;&#x43E;&#x432;&#x44B;&#x43C; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F;&#x43C;&#x438; &#x433;&#x440;&#x430;&#x444;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x43E;&#x433;&#x43E; &#x438;&#x43D;&#x442;&#x435;&#x440;&#x444;&#x435;&#x439;&#x441;&#x430;
 * &#x438; &#x432;&#x44B;&#x43F;&#x43E;&#x43B;&#x43D;&#x44F;&#x44E;&#x449;&#x438;&#x439; &#x43F;&#x435;&#x440;&#x432;&#x438;&#x447;&#x43D;&#x443;&#x44E; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x43A;&#x443; &#x435;&#x433;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
 *
 * &#x41E;&#x442;&#x432;&#x435;&#x447;&#x430;&#x435;&#x442; &#x437;&#x430; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x43A;&#x443; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x438;&#x439; &#x432;&#x441;&#x435;&#x445; &#x43A;&#x43D;&#x43E;&#x43F;&#x43E;&#x43A;, &#x43D;&#x430;&#x436;&#x430;&#x442;&#x438;&#x439; &#x432;&#x441;&#x435;&#x445; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;,
 * &#x432;&#x44B;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x443; &#x438; &#x437;&#x430;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x443; &#x444;&#x430;&#x439;&#x43B;&#x43E;&#x432;.
 */
export default class GUIModule extends Module {
    static get eventspace_name() {return &quot;gui&quot;}
    static get event_types() {return [&quot;ready&quot;, &quot;mission&quot;, &quot;run&quot;, &quot;stop&quot;, &quot;check&quot;, &quot;keyup&quot;, &quot;hash-command&quot;, &quot;menu&quot;, &quot;load-file&quot;, &quot;unload-file&quot;]}

    static defaults() {
        return {
            anyKey: false,  // &#x43E;&#x442;&#x43A;&#x43B;&#x44E;&#x447;&#x438;&#x442;&#x44C; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x44E; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;
            logoText: &quot;Tapanda&quot;,
            imagesPath: &quot;&quot;,
            devMode: false,
        }
    }

    constructor(options) {
        super(options);

        this._button_codes = [];

        this._state = {
            ready: false,
            switched: true, // debug only
            listenButtons: false,
            launchVariant: false,

            areasDisp: {
                text: false,
                lesson: false,
                button: false,
            }
        };

        this._task_description = undefined;

        this._filer = new FileWrapper();
        this._spinner = new SpinnerWrapper();
        this._lesson_pane = new LessonPaneWrapper();
        this._text_pane = new TextPaneWrapper();
        this._launch_btn = new LaunchBtnWrapper();
        this._alertifier = new AlertifierWrapper();

        if (this._options.imagesPath) {
            this._alertifier.setImagesPath(this._options.imagesPath);
        }

        this._lesson_pane.registerLogoText(this._options.logoText);

        this._setMenuStructure();

        if (this._options.devMode) {
            this.switchDeveloperMode(true);
        } else {
            this.switchDeveloperMode(false);
        }

        this._subscribeToWrapperEvents();
    }

    hideSpinner() {
        this._spinner.hide();

        if (!this._state.ready) {
            this._state.ready = true;
            this.emitEvent(&quot;ready&quot;);
        }
    }

    showSpinnerError(message) {
        this._spinner.setTextError(message);
    }

    showMissionButtons(missions) {
        return new Promise((resolve, reject) =&gt; {
            if (!missions) {return resolve(false)}

            this._lesson_pane.registerMissions(missions);

            resolve(true);
        });
    }

    setMissionCurrent(mission_idx) {
        return new Promise((resolve, reject) =&gt; {
            this._lesson_pane.setMissionActive(mission_idx);

            resolve(true);
        });
    }

    setMissionProgress(mission) {
        return new Promise((resolve, reject) =&gt; {
            if (!mission) {return resolve(false)}

            this._lesson_pane.setMissionProgress(mission.missionIDX, mission.exerciseIDX);

            resolve(true);
        });
    }

    setMissionSkiddingOn(mission_idx) {
        return new Promise((resolve, reject) =&gt; {
            if (!mission_idx) {return resolve(false)}

            this._lesson_pane.setMissionSkidding(mission_idx, true);

            resolve(true);
        });
    }

    setExerciseCurrent(exercise_idx) {
        return new Promise((resolve, reject) =&gt; {
            console.log(exercise_idx);

            this._lesson_pane.setExerciseActive(exercise_idx);

            resolve(true);
        });
    }

    setCourseText(lesson_name) {
        return new Promise((resolve, reject) =&gt; {
            let text = &quot;&#x423;&#x440;&#x43E;&#x43A;: &quot; + lesson_name;

            if (!this._state.areasDisp.lesson) {
                this._lesson_pane.registerCourseText(text);
            } else {
                this._lesson_pane.setCourseText(text);
            }

            resolve(true);
        });
    }

    setBoardStatus(status) {
        console.log(&quot;BS&quot;, status);
        switch (status) {
            case BOARD_STATUSES.SEARCH: {
                this.hideAllAlerts();
                this._lesson_pane.setStatus(&apos;warning&apos;);
                break;
            }
            case BOARD_STATUSES.CONNECT: {
                this.hideAllAlerts();
                this._lesson_pane.setStatus(&apos;success&apos;);
                break;
            }
            case BOARD_STATUSES.DISCONNECT: {
                this.showAlert(&apos;no_board&apos;);
                this._lesson_pane.setStatus(&apos;error&apos;);
                break;
            }
            case BOARD_STATUSES.NONE: {
                this._lesson_pane.setStatus(&apos;active&apos;);
                break;
            }
            default: {
                this._lesson_pane.setStatus(&apos;default&apos;);
                break;
            }
        }
    }

    showTask(html) {
        this._text_pane.setText(html);

        return Promise.resolve();
    }

    setLaunchVariant(variant) {
        if (!this._state.areasDisp.buttons)   {return Promise.resolve(false)}

        console.log(&quot;SLV&quot;, variant);

        switch (variant) {
            case LAUNCH_VARIANTS.NONE: {
                this._launch_btn.hide();
                break;
            }
            case LAUNCH_VARIANTS.CHECK: {
                this._launch_btn.show(0);
                break;
            }
            case LAUNCH_VARIANTS.EXECUTE: {
                this._launch_btn.show(1);
                break;
            }
            case LAUNCH_VARIANTS.CHECK_N_EXECUTE: {
                this._launch_btn.show(2);
                break;
            }
            default: {
                this._state.launchVariant = variant;
            }
        }

        this._state.launchVariant = !this._state.launchVariant;

        return Promise.resolve(true);
    }

    affirmLaunchButtonState(button, start=true) {
        if (!this._state.areasDisp.buttons) {return false}
        if (!button) {throw new TypeError(&quot;Button is not defined&quot;)}

        if (start) {
            this._launch_btn.setStart(button);
        } else {
            this._launch_btn.setStop(button);
        }
    }

    injectLaunchButtons(dom_node) {
        if (!dom_node)                      {return Promise.resolve(false)}
        if (this._state.areasDisp.buttons)   {return Promise.resolve(true)}

        this._state.areasDisp.buttons = true;

        return this._launch_btn.inject(dom_node);
    }

    injectTextPane(dom_node) {
        if (!dom_node)                  {return Promise.resolve(false)}
        if (this._state.areasDisp.text) {return Promise.resolve(true)}

        this._state.areasDisp.text = true;

        return this._text_pane.inject(dom_node);
    }

    ejectTextPane() {
        if (!this._state.areasDisp.text) {return Promise.resolve(true)}

        this._state.areasDisp.text = false;

        return this._text_pane.eject();
    }

    injectLessonPane(dom_node) {
        if (!dom_node)                  {return Promise.resolve(false)}
        if (this._state.areasDisp.lesson) {return Promise.resolve(true)}

        this._state.areasDisp.lesson = true;

        return this._lesson_pane.inject(dom_node);
    }

    /**
     * &#x41D;&#x430;&#x437;&#x43D;&#x430;&#x447;&#x438;&#x442;&#x44C; &#x434;&#x43E;&#x43F;&#x443;&#x441;&#x442;&#x438;&#x43C;&#x44B;&#x435; &#x43A;&#x43E;&#x434;&#x44B; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448; &#x434;&#x43B;&#x44F; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x430;&#x446;&#x438;&#x438;
     *
     * @param {Array} button_codes &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432; &#x43A;&#x43E;&#x434;&#x43E;&#x432; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;
     */
    registerButtonCodes(button_codes) {
        if (!Array.isArray(button_codes)) {
            throw new TypeError(&quot;setButtonCodes(): button codes should be an Array instance&quot;);
        }

        this._button_codes = button_codes;
    }

    /**
     * &#x41F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x442;&#x44C; &#x43B;&#x438; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x438;&#x44F; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;
     *
     * @param {boolean} on true - &#x432;&#x43A;&#x43B;&#x44E;&#x447;&#x438;&#x442;&#x44C; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x43D;&#x438;&#x435;, &#x438;&#x43D;&#x430;&#x447;&#x435; - &#x432;&#x44B;&#x43A;&#x43B;&#x44E;&#x447;&#x438;&#x442;&#x44C;
     */
    listenButtons(on) {
        this._state.listenButtons = on;
    }

    /**
     * &#x412;&#x44B;&#x433;&#x440;&#x443;&#x437;&#x438;&#x442;&#x44C; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x443; &#x432; &#x444;&#x430;&#x439;&#x43B;
     *
     * &#x41F;&#x43E;&#x441;&#x43B;&#x435; &#x432;&#x44B;&#x437;&#x43E;&#x432;&#x430; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x438; &#x43F;&#x43E;&#x441;&#x43B;&#x435;&#x434;&#x443;&#x435;&#x442; &#x432;&#x44B;&#x432;&#x43E;&#x434; &#x434;&#x438;&#x430;&#x43B;&#x43E;&#x433;&#x43E;&#x432;&#x43E;&#x433;&#x43E; &#x43E;&#x43A;&#x43D;&#x430;
     * &#x441; &#x437;&#x430;&#x43F;&#x440;&#x43E;&#x441;&#x43E;&#x43C; &#x43D;&#x430; &#x443;&#x43A;&#x430;&#x437;&#x430;&#x43D;&#x438;&#x435; &#x43F;&#x443;&#x442;&#x438; &#x438; &#x438;&#x43C;&#x435;&#x43D;&#x438; &#x43D;&#x43E;&#x432;&#x43E;&#x433;&#x43E; &#x444;&#x430;&#x439;&#x43B;&#x430;
     *
     * @param str {String} &#x438;&#x441;&#x445;&#x43E;&#x434;&#x43D;&#x430;&#x44F; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x430; &#x434;&#x43B;&#x44F; &#x441;&#x43E;&#x445;&#x440;&#x430;&#x43D;&#x435;&#x43D;&#x438;&#x44F;
     */
    saveToFile(str) {
        this._filer.saveStrToFile(&quot;codehour-sample-code.txt&quot;, str);
    }

    /**
     * &#x417;&#x430;&#x433;&#x440;&#x443;&#x437;&#x438;&#x442;&#x44C; &#x441;&#x442;&#x440;&#x43E;&#x43A;&#x443; &#x438;&#x437; &#x444;&#x430;&#x439;&#x43B;&#x430;
     *
     * &#x41F;&#x440;&#x43E;&#x446;&#x435;&#x434;&#x443;&#x440;&#x430; &#x430;&#x441;&#x438;&#x43D;&#x445;&#x440;&#x43E;&#x43D;&#x43D;&#x430;&#x44F;, &#x43F;&#x43E;&#x44D;&#x442;&#x43E;&#x43C;&#x443; &#x43F;&#x43E; &#x440;&#x435;&#x437;&#x443;&#x43B;&#x44C;&#x442;&#x430;&#x442;&#x443; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x43A;&#x438; &#x444;&#x430;&#x439;&#x43B;&#x430;
     * &#x433;&#x435;&#x43D;&#x435;&#x440;&#x438;&#x440;&#x443;&#x435;&#x442;&#x441;&#x44F; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x435; &quot;load-file&quot;
     *
     * @param {File} file &#x438;&#x441;&#x445;&#x43E;&#x434;&#x43D;&#x44B;&#x439; &#x444;&#x430;&#x439;&#x43B;
     */
    loadFromFile(file) {
        this._filer.readStrFromFile(file)
            .then(str =&gt; this.emitEvent(&quot;load-file&quot;, str));
    }

    showAlert(type) {
        this._alertifier.alertIndelible(type);
    }

    showAlertInputCommand() {
        this._alertifier.alertInput(&apos;command&apos;)
            .then(command =&gt; {
                command = this._filterURLHashCommand(command);

                this.emitEvent(&quot;hash-command&quot;, command);
            });
    }

    hideAllAlerts() {
        this._alertifier.closeAll();
    }

    switchDeveloperMode(on) {
        this._lesson_pane.switchTask(on);
    }

    /**
     * &#x41E;&#x442;&#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x435; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x438;&#x44F; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;&#x438;
     *
     * &#x422;&#x438;&#x43F; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; (keydown, keypress, keyup) &#x43D;&#x435; &#x438;&#x43C;&#x435;&#x435;&#x442; &#x437;&#x43D;&#x430;&#x447;&#x435;&#x43D;&#x438;&#x44F;
     *
     * @param {Integer} keycode &#x43A;&#x43E;&#x434; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x43E;&#x439; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;&#x438;
     * @returns {Integer|bool} true, &#x435;&#x441;&#x43B;&#x438; &#x43A;&#x43E;&#x434; &#x43F;&#x440;&#x43E;&#x448;&#x451;&#x43B; &#x447;&#x435;&#x440;&#x435;&#x437; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;, &#x43A;&#x43E;&#x434; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x43E;&#x439; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;&#x438;; &#x438;&#x43D;&#x430;&#x447;&#x435; false
     * @private
     */
    _filterKeyEvent(keycode) {
        if (this._button_codes.indexOf(keycode) &gt;= 0 || this._options.anyKey) {
            return keycode;
        }

        return false;
    }

    _filterURLHashCommand(hash) {
        if (typeof hash !== &quot;string&quot;) {throw new TypeError(&quot;URL Hash is not a string&quot;)}

        let mission_idx, exercise_idx;

        console.log(hash);

        if (hash.match(REGEXPS.MISSION_EXERCISE)) {
            [mission_idx, exercise_idx] = hash.match(REGEXPS.NUMBERS);
        }

        else if (hash.match(REGEXPS.MISSION)) {
            mission_idx = hash.match(REGEXPS.NUMBERS);
        }

        else if (hash.match(REGEXPS.EXERCISE)) {
            exercise_idx = hash.match(REGEXPS.NUMBERS);
        }

        else {
            return {
                type: HASH_TYPES.NONE,
            }
        }

        return {
            type: HASH_TYPES.GOTO,
            data: {
                missionIDX: Number(mission_idx),
                exerciseIDX: Number(exercise_idx),
            }
        };
    }

    _checkURLHashCommand() {
        let hash = window.location.hash;

        return this._filterURLHashCommand(hash);
    }

    _setMenuStructure() {
        this._lesson_pane.setMenuStructure([
            {
                type: &apos;default&apos;,
                name: &quot;courses&quot;,
                text: &quot;&#x41A;&#x443;&#x440;&#x441;&#x44B;&quot;,
                handler: (name) =&gt; {this.emitEvent(&quot;menu&quot;, {name: name})}
            },
            {
                type: &apos;default&apos;,
                name: &quot;settings&quot;,
                text: &quot;&#x41D;&#x430;&#x441;&#x442;&#x440;&#x43E;&#x439;&#x43A;&#x438;&quot;,
                handler: (name) =&gt; {this.emitEvent(&quot;menu&quot;, {name: name})}
            },
            {
                type: &apos;radio&apos;,
                name: &quot;developer&quot;,
                text: &quot;&#x420;&#x430;&#x437;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&quot;,
                handler: (name, pressed) =&gt; {this.emitEvent(&quot;menu&quot;, {name: name, state: pressed})}
            },
            {
                type: &apos;default&apos;,
                name: &quot;command&quot;,
                text: &quot;&#x412;&#x44B;&#x43F;&#x43E;&#x43B;&#x43D;&#x438;&#x442;&#x44C;&quot;,
                handler: () =&gt; {this.showAlertInputCommand()}
            },
            {
                type: &apos;disabled&apos;,
                name: &quot;origin&quot;,
                text: window.location.host,
                right: true
            },
        ]);
    }

    _subscribeToWrapperEvents() {
        /* &#x41A;&#x430;&#x43A; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x430; &#x43A;&#x43D;&#x43E;&#x43F;&#x43A;&#x430; &#x43F;&#x435;&#x440;&#x435;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x440;&#x430;&#x437;&#x43C;&#x435;&#x442;&#x43A;&#x438; */
        // $(&quot;#switch-btn&quot;).click(() =&gt; {
        //     this._state.switched = !this._state.switched;
        //     this.emitEvent(&quot;switch&quot;, this._state.switched);
        //
        //     this._debug.log(&apos;Switch clicked: &apos;, this._state.switched);
        // });

        /* &#x41A;&#x430;&#x43A; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x430; &#x43A;&#x43D;&#x43E;&#x43F;&#x43A;&#x430; &#x437;&#x430;&#x43F;&#x443;&#x441;&#x430; &#x43C;&#x438;&#x441;&#x441;&#x438;&#x438; */
        this._lesson_pane.onMissionClick(idx =&gt; {
            this.emitEvent(&quot;mission&quot;, idx);
        });

        this._lesson_pane.onMenuClick(() =&gt; {
            this.emitEvent(&quot;menu&quot;);
        });

        /* &#x41A;&#x430;&#x43A; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x430; &#x43A;&#x43D;&#x43E;&#x43F;&#x43A;&#x430; &#x437;&#x430;&#x43F;&#x443;&#x441;&#x43A;&#x430;/&#x43F;&#x440;&#x43E;&#x432;&#x435;&#x440;&#x43A;&#x438; */
        this._launch_btn.onButtonClick((button, start) =&gt; {
            if (button === &apos;check&apos;) {
                this.emitEvent(&quot;check&quot;);
            }

            if (button === &apos;execute&apos;) {
                if (start) {
                    this.emitEvent(&quot;run&quot;);
                } else {
                    this.emitEvent(&quot;stop&quot;);
                }
            }
        });

        /* &#x41A;&#x43E;&#x433;&#x434;&#x430; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x430; &#x43A;&#x43D;&#x43E;&#x43F;&#x43A;&#x430; &#x437;&#x430;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x438; &#x444;&#x430;&#x439;&#x43B;&#x430; */
        $(&quot; #load-btn&quot;).change((evt) =&gt; {
            this.loadFromFile(evt.target.files[0]);
        });

        /* &#x41A;&#x430;&#x43A; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x430; &#x43A;&#x43D;&#x43E;&#x43F;&#x43A;&#x430; &#x432;&#x44B;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x438; &#x43A;&#x43E;&#x434;&#x430; */
        $(&quot;#unload-btn&quot;).click(() =&gt; {
            this.emitEvent(&quot;unload-file&quot;);
        });

        /* &#x41A;&#x430;&#x43A; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x43D;&#x430;&#x436;&#x430;&#x442;&#x430; &#x43A;&#x43B;&#x430;&#x432;&#x438;&#x448;&#x430; */
        $(document).keyup(event =&gt; {
            if (this._state.listenButtons) {
                if (this._filterKeyEvent(event.which)) {
                    this.emitEvent(&quot;keyup&quot;, event.which);
                }
            }
        });

        window.onhashchange = () =&gt; {
            let command = this._checkURLHashCommand();

            this.emitEvent(&quot;hash-command&quot;, command);
        }
    }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
