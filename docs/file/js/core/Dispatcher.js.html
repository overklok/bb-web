<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">js/core/Dispatcher.js | &#x422;&#x430;&#x43F;&#x430;&#x43D;&#x434;&#x430;: &#x41C;&#x430;&#x43A;&#x435;&#x442;&#x43D;&#x430;&#x44F; &#x43F;&#x43B;&#x430;&#x442;&#x430;</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="&#x41F;&#x430;&#x43A;&#x435;&#x442; frontend-&#x440;&#x435;&#x448;&#x435;&#x43D;&#x438;&#x439; &#x434;&#x43B;&#x44F; &#x43F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x430; &#x427;&#x430;&#x441; &#x43A;&#x43E;&#x434;&#x430;"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="&#x422;&#x430;&#x43F;&#x430;&#x43D;&#x434;&#x430;: &#x41C;&#x430;&#x43A;&#x435;&#x442;&#x43D;&#x430;&#x44F; &#x43F;&#x43B;&#x430;&#x442;&#x430;"><meta property="twitter:description" content="&#x41F;&#x430;&#x43A;&#x435;&#x442; frontend-&#x440;&#x435;&#x448;&#x435;&#x43D;&#x438;&#x439; &#x434;&#x43B;&#x44F; &#x43F;&#x440;&#x43E;&#x435;&#x43A;&#x442;&#x430; &#x427;&#x430;&#x441; &#x43A;&#x43E;&#x434;&#x430;"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a href="https://bitbucket.org/makeitlab/codehour-breadboard-web">Repository</a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/admin_blockly.js~AdminBlocklyApplication.html">AdminBlocklyApplication</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/admin_board.js~AdminBoardApplication.html">AdminBoardApplication</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/index.js~Application.html">Application</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#core">core</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Dispatcher.js~Dispatcher.html">Dispatcher</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Loggable.js~Loggable.html">Loggable</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Module.js~Module.html">Module</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/js/core/Wrapper.js~Wrapper.html">Wrapper</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">js/core/Dispatcher.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">const ERROR_EVENT_NAME = &apos;error&apos;;

/**
 * &#x414;&#x438;&#x441;&#x43F;&#x435;&#x442;&#x447;&#x435;&#x440; - &#x43C;&#x435;&#x43D;&#x435;&#x434;&#x436;&#x435;&#x440; &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x44B;&#x445; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;.
 * &#x41A;&#x430;&#x436;&#x434;&#x43E;&#x435; &#x43F;&#x440;&#x438;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x435; &#x43E;&#x431;&#x43B;&#x430;&#x434;&#x430;&#x435;&#x442; &#x435;&#x434;&#x438;&#x43D;&#x441;&#x442;&#x432;&#x435;&#x43D;&#x43D;&#x44B;&#x43C; &#x434;&#x438;&#x441;&#x43F;&#x435;&#x442;&#x447;&#x435;&#x440;&#x43E;&#x43C;.
 * &#x414;&#x438;&#x441;&#x43F;&#x435;&#x442;&#x447;&#x435;&#x440; &#x43D;&#x435; &#x437;&#x43D;&#x430;&#x435;&#x442; &#x43E; &#x441;&#x443;&#x449;&#x435;&#x441;&#x442;&#x432;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x438; &#x43F;&#x440;&#x438;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x44F;, &#x43D;&#x43E; &#x437;&#x43D;&#x430;&#x435;&#x442; &#x43E; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;&#x445;.
 *
 * &#x417;&#x430;&#x434;&#x430;&#x447;&#x430; &#x434;&#x438;&#x441;&#x43F;&#x435;&#x442;&#x447;&#x435;&#x440;&#x430; - &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x438;&#x442;&#x44C; &#x43F;&#x440;&#x438;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x435; &#x441; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;&#x43C;&#x438;, &#x432;&#x44B;&#x437;&#x44B;&#x432;&#x430;&#x44F; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x438; &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x44B;&#x445; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; &#x432; &#x43F;&#x440;&#x438;&#x43B;&#x43E;&#x436;&#x435;&#x43D;&#x438;&#x438;
 * &#x434;&#x43B;&#x44F; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x43A;&#x438; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; &#x432; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;&#x445;. &#x412; &#x43A;&#x430;&#x447;&#x435;&#x441;&#x442;&#x432;&#x435; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x432; &#x432;&#x44B;&#x441;&#x442;&#x443;&#x43F;&#x430;&#x44E;&#x442; &#x446;&#x435;&#x43F;&#x43E;&#x447;&#x43A;&#x438; &#x43E;&#x431;&#x435;&#x449;&#x430;&#x43D;&#x438;&#x439;.
 *
 * &#x421; &#x43F;&#x43E;&#x43C;&#x43E;&#x449;&#x44C;&#x44E; &#x434;&#x438;&#x441;&#x43F;&#x435;&#x442;&#x447;&#x435;&#x440;&#x430; &#x43C;&#x43E;&#x436;&#x43D;&#x43E; &#x443;&#x43F;&#x440;&#x430;&#x432;&#x43B;&#x44F;&#x442;&#x44C; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x43D;&#x438;&#x435;&#x43C; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;: &#x432;&#x43A;&#x43B;&#x44E;&#x447;&#x430;&#x442;&#x44C; &#x438;&#x43B;&#x438; &#x43E;&#x442;&#x43A;&#x43B;&#x44E;&#x447;&#x430;&#x442;&#x44C; &#x43F;&#x43E;&#x434;&#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x430; &#x442;&#x438;&#x43F;&#x43E;&#x432; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
 * &#x432; &#x440;&#x430;&#x437;&#x43B;&#x438;&#x447;&#x43D;&#x44B;&#x445; &#x441;&#x438;&#x442;&#x443;&#x430;&#x446;&#x438;&#x44F;&#x445;.
 */
export default class Dispatcher {
    /**
     * &#x421;&#x43E;&#x437;&#x434;&#x430;&#x442;&#x44C; &#x44D;&#x43A;&#x437;&#x435;&#x43C;&#x43F;&#x43B;&#x44F;&#x440; &#x434;&#x438;&#x441;&#x43F;&#x435;&#x442;&#x447;&#x435;&#x440;&#x430;.
     */
    constructor() {
        /** @type {Array&lt;Module&gt;} &#x44D;&#x43A;&#x437;&#x435;&#x43C;&#x43F;&#x43B;&#x44F;&#x440;&#x44B; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x435;&#x439; */
        this._modules = [];

        /** @type {boolean} &#x433;&#x43E;&#x442;&#x43E;&#x432;&#x43D;&#x43E;&#x441;&#x442;&#x44C; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F; &#x433;&#x435;&#x43D;&#x435;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; */
        this._handler_ready = undefined;

        /** @type {Object} &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x438; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; */
        this._handlers = {};

        /**
         * @type {{always: Set, current: Set}} &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x435; &#x442;&#x438;&#x43F;&#x44B; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;: &#x43F;&#x43E;&#x441;&#x442;&#x43E;&#x44F;&#x43D;&#x43D;&#x44B;&#x435; &#x438; &#x442;&#x435;&#x43A;&#x443;&#x449;&#x438;&#x435;
         */
        this._event_types_listening = {
            always: new Set(),
            current: new Set()
        };

        /** @type {boolean} &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x437;&#x430;&#x431;&#x43B;&#x43E;&#x43A;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x44B; */
        this._denied = false;
        /** @type {Array&lt;string&gt;} &#x438;&#x441;&#x43A;&#x44E;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x43F;&#x440;&#x438; &#x431;&#x43B;&#x43E;&#x43A;&#x438;&#x440;&#x43E;&#x432;&#x43A;&#x435; */
        this._deny_excepts = [];
        /** @type {Set} &#x432;&#x441;&#x435; &#x437;&#x430;&#x440;&#x435;&#x433;&#x438;&#x441;&#x442;&#x440;&#x438;&#x440;&#x43E;&#x432;&#x430;&#x43D;&#x43D;&#x44B;&#x435; &#x442;&#x438;&#x43F;&#x44B; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; */
        this._event_types = new Set();
    }

    /**
     * &#x41F;&#x43E;&#x434;&#x43F;&#x438;&#x441;&#x430;&#x442;&#x44C; &#x434;&#x438;&#x441;&#x43F;&#x435;&#x442;&#x447;&#x435;&#x440; &#x43D;&#x430; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;
     *
     * &#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C;&#x43E;&#x435; &#x43F;&#x43E;&#x432;&#x435;&#x434;&#x435;&#x43D;&#x438;&#x435;:
     *     - &#x422;&#x438;&#x43F; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x434;&#x43E;&#x431;&#x430;&#x432;&#x43B;&#x44F;&#x435;&#x442;&#x441;&#x44F; &#x432; &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445; &#x442;&#x438;&#x43F;&#x43E;&#x432; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     *     - &#x41E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x438; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F; &#x431;&#x443;&#x434;&#x443;&#x442; &#x432;&#x44B;&#x437;&#x44B;&#x432;&#x430;&#x442;&#x44C; &#x43C;&#x435;&#x442;&#x43E;&#x434;, &#x432;&#x44B;&#x437;&#x44B;&#x432;&#x430;&#x44E;&#x449;&#x438;&#x439; &#x43B;&#x43E;&#x43A;&#x430;&#x43B;&#x44C;&#x43D;&#x44B;&#x439; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A; &#x441;&#x43E;&#x43E;&#x442;&#x432;&#x435;&#x442;&#x441;&#x442;&#x432;&#x443;&#x44E;&#x449;&#x435;&#x433;&#x43E;
     *       &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x43E;&#x433;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;
     *
     * &#x421;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F; &#x431;&#x443;&#x434;&#x443;&#x442; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x442;&#x44C;&#x441;&#x44F; &#x43F;&#x43E;&#x434;&#x43A;&#x43B;&#x44E;&#x447;&#x451;&#x43D;&#x43D;&#x44B;&#x43C;&#x438; &#x43A; &#x43D;&#x435;&#x43C;&#x443; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x430;&#x43C;&#x438; &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x44B;&#x445; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     * &#x43F;&#x43E; &#x438;&#x43C;&#x435;&#x43D;&#x438; `&#x43A;&#x440;&#x430;&#x442;&#x43A;&#x43E;&#x435;_&#x438;&#x43C;&#x44F;_&#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;:&#x438;&#x43C;&#x44F;_&#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;` (&#x441;&#x43C;. &#x43C;&#x435;&#x442;&#x43E;&#x434; {@link on})
     *
     * &#x421;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x435; `&#x43A;&#x440;&#x430;&#x442;&#x43A;&#x43E;&#x435;_&#x438;&#x43C;&#x44F;_&#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;:ERROR_EVENT_NAME` &#x43F;&#x435;&#x440;&#x435;&#x434;&#x430;&#x43D;&#x43D;&#x43E;&#x433;&#x43E; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;
     * &#x430;&#x432;&#x442;&#x43E;&#x43C;&#x430;&#x442;&#x438;&#x447;&#x435;&#x441;&#x43A;&#x438; &#x437;&#x430;&#x43D;&#x43E;&#x441;&#x438;&#x442;&#x441;&#x44F; &#x432; &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445;
     *
     * @param {Module} module &#x44D;&#x43A;&#x437;&#x435;&#x43C;&#x43F;&#x43B;&#x44F;&#x440; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;, &#x43D;&#x430; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x43E;&#x433;&#x43E; &#x442;&#x440;&#x435;&#x431;&#x443;&#x435;&#x442;&#x441;&#x44F; &#x43F;&#x43E;&#x434;&#x43F;&#x438;&#x441;&#x43A;&#x430;
     */
    subscribe(module) {
        let self = this;

        let event_types = module.event_types;
        let module_prefix = module.eventspace_name;

        event_types.forEach((name, index) =&gt; {
            let full_name = module_prefix + &apos;:&apos; + name;

            module.attachEventListener(name, (data) =&gt; {
                let fn = this._getHandler(full_name);
                fn(data);
            });

            /// &#x414;&#x43E;&#x431;&#x430;&#x432;&#x438;&#x442;&#x44C; &#x442;&#x438;&#x43F; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x432; &#x43E;&#x431;&#x449;&#x438;&#x439; &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A;
            this._event_types.add(full_name);
        });

        this._modules.push(module);
    }

    /**
     * &#x421;&#x43E;&#x43E;&#x431;&#x449;&#x438;&#x442;&#x44C; &#x43E; &#x433;&#x43E;&#x442;&#x43E;&#x432;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F; &#x432;&#x440;&#x443;&#x447;&#x43D;&#x443;&#x44E;
     *
     * @param {Object} data &#x434;&#x430;&#x43D;&#x43D;&#x44B;&#x435;, &#x43F;&#x435;&#x440;&#x435;&#x434;&#x430;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x435; &#x43E;&#x431;&#x440;&#x430;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x443; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; `ready`
     */
    ready(data) {
        if (this._handler_ready) {
            this._handler_ready(data);
        }
    }

    /**
     * &#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x438;&#x442;&#x44C; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x433;&#x43E;&#x442;&#x43E;&#x432;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;
     *
     * @param {function} handler &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x433;&#x43E;&#x442;&#x43E;&#x432;&#x43D;&#x43E;&#x441;&#x442;&#x438; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;
     */
    onReady(handler) {
        this._handler_ready = handler;
    }

    /**
     * &#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x438;&#x442;&#x44C; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A; &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x43E;&#x433;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;
     *
     * &#x421;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x441; &#x438;&#x43C;&#x435;&#x43D;&#x435;&#x43C; name &#x431;&#x443;&#x434;&#x443;&#x442; &#x438;&#x441;&#x43F;&#x43E;&#x43B;&#x44C;&#x437;&#x43E;&#x432;&#x430;&#x442;&#x44C; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44E; handler &#x432; &#x43A;&#x430;&#x447;&#x435;&#x441;&#x442;&#x432;&#x435; &#x440;&#x435;&#x430;&#x43A;&#x446;&#x438;&#x438;
     *
     * &#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C;&#x43E;&#x435; &#x43F;&#x43E;&#x432;&#x435;&#x434;&#x435;&#x43D;&#x438;&#x435;:
     *     - &#x412;&#x44B;&#x431;&#x440;&#x430;&#x441;&#x44B;&#x432;&#x430;&#x435;&#x442; &#x438;&#x441;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D;&#x438;&#x44F; &#x43F;&#x440;&#x438; &#x43D;&#x435;&#x432;&#x435;&#x440;&#x43D;&#x44B;&#x445; &#x430;&#x440;&#x433;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430;&#x445;
     *     - &#x421;&#x43B;&#x43E;&#x432;&#x430;&#x440;&#x44C; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x432; &#x434;&#x43E;&#x43F;&#x43E;&#x43B;&#x43D;&#x44F;&#x435;&#x442;&#x441;&#x44F; &#x434;&#x430;&#x43D;&#x43D;&#x44B;&#x43C; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x43C; &#x441; &#x434;&#x430;&#x43D;&#x43D;&#x44B;&#x43C; &#x438;&#x43C;&#x435;&#x43D;&#x435;&#x43C; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;
     *     - &#x41F;&#x440;&#x438; &#x432;&#x44B;&#x437;&#x43E;&#x432;&#x435; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x438; &#x441; &#x442;&#x435;&#x43C; &#x436;&#x435; &#x438;&#x43C;&#x435;&#x43D;&#x435;&#x43C; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;, &#x43D;&#x43E; &#x441; &#x434;&#x440;&#x443;&#x433;&#x438;&#x43C; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;&#x43E;&#x43C; &#x43F;&#x440;&#x43E;&#x438;&#x441;&#x445;&#x43E;&#x434;&#x438;&#x442; &#x43F;&#x435;&#x440;&#x435;&#x43E;&#x43F;&#x440;&#x435;&#x434;&#x435;&#x43B;&#x435;&#x43D;&#x438;&#x435;
     *
     * @param {string}      name        &#x438;&#x43C;&#x44F; &#x442;&#x438;&#x43F;&#x430; &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x43E;&#x433;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x432; &#x444;&#x43E;&#x440;&#x43C;&#x430;&#x442;&#x435; `&#x43A;&#x440;&#x430;&#x442;&#x43A;&#x43E;&#x435;_&#x438;&#x43C;&#x44F;_&#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;:&#x438;&#x43C;&#x44F;_&#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;`
     * @param {Function}    handler     &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F;-&#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     */
    on(name, handler) {
        if (typeof name     !== &apos;string&apos;)    {throw new TypeError(&apos;Name is not a string!&apos;)}
        if (typeof handler  !== &apos;function&apos;)  {throw new TypeError(&apos;Handler is not a function!&apos;)}

        this._handlers[name] = handler;
    }

    /**
     * &#x423;&#x441;&#x442;&#x430;&#x43D;&#x43E;&#x432;&#x438;&#x442;&#x44C; &#x43F;&#x43E;&#x434;&#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x43E; &#x442;&#x438;&#x43F;&#x43E;&#x432; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;, &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x44B;&#x435; &#x431;&#x443;&#x434;&#x443;&#x442; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x430;&#x442;&#x44B;&#x432;&#x430;&#x442;&#x44C;&#x441;&#x44F; &#x432;&#x441;&#x435;&#x433;&#x434;&#x430;
     *
     * &#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C;&#x43E;&#x435; &#x43F;&#x43E;&#x432;&#x435;&#x434;&#x435;&#x43D;&#x438;&#x435;:
     *     - &#x412;&#x44B;&#x431;&#x440;&#x430;&#x441;&#x44B;&#x432;&#x430;&#x435;&#x442; &#x438;&#x441;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D;&#x438;&#x435;, &#x435;&#x441;&#x43B;&#x438; &#x430;&#x440;&#x433;&#x443;&#x43C;&#x435;&#x43D;&#x442; &#x43D;&#x435; &#x44F;&#x432;&#x43B;&#x44F;&#x435;&#x442;&#x441;&#x44F; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432;&#x43E;&#x43C;
     *     - &#x417;&#x430;&#x434;&#x430;&#x43D;&#x43D;&#x44B;&#x439; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432; &#x43F;&#x440;&#x435;&#x43E;&#x431;&#x440;&#x430;&#x437;&#x443;&#x435;&#x442;&#x441;&#x44F; &#x432; &#x440;&#x430;&#x437;&#x432;&#x451;&#x440;&#x43D;&#x443;&#x442;&#x43E;&#x435; &#x43F;&#x43E;&#x434;&#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;, &#x441;&#x43E;&#x445;&#x440;&#x430;&#x43D;&#x44F;&#x44E;&#x449;&#x435;&#x435;&#x441;&#x44F; &#x432; &#x43F;&#x430;&#x440;&#x430;&#x43C;&#x435;&#x442;&#x440;&#x430;&#x445; &#x43E;&#x431;&#x44A;&#x435;&#x43A;&#x442;&#x430;
     *
     * &#x424;&#x43E;&#x440;&#x43C;&#x430;&#x442; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432;&#x430; eventspace &#x441;&#x43C;. {@link getFilterByEventspace}
     *
     * @param {Array&lt;string&gt;} eventspace &#x43F;&#x43E;&#x434;&#x43C;&#x43D;&#x43E;&#x436;&#x435;&#x441;&#x442;&#x432;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     */
    always(eventspace) {
        if (eventspace &amp;&amp; !Array.isArray(eventspace))    {throw new TypeError (&apos;Eventspace should be an array!&apos;)}

        // this._event_types_listening.always.clear();

        this._event_types_listening.always = new Set(
            [...this._event_types].filter(Dispatcher.getFilterByEventspace(eventspace))
        );
    }

    /**
     * &#x41F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x442;&#x44C; &#x432;&#x441;&#x435; &#x442;&#x438;&#x43F;&#x44B; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     *
     * &#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C;&#x43E;&#x435; &#x43F;&#x43E;&#x432;&#x435;&#x434;&#x435;&#x43D;&#x438;&#x435;
     *     - &#x424;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x434;&#x43E;&#x43B;&#x436;&#x43D;&#x430; &#x437;&#x430;&#x43C;&#x435;&#x43D;&#x438;&#x442;&#x44C; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x435; &#x442;&#x438;&#x43F;&#x44B; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; &#x43D;&#x430; &#x432;&#x441;&#x435; &#x432;&#x43E;&#x437;&#x43C;&#x43E;&#x436;&#x43D;&#x44B;&#x435;
     */
    all() {
        this._event_types_listening.current = this._event_types;
    }

    /**
     * &#x41F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x442;&#x44C; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x437;&#x430;&#x434;&#x430;&#x43D;&#x43D;&#x44B;&#x435; &#x442;&#x438;&#x43F;&#x44B; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     *
     * @param eventspace {string} &#x438;&#x43C;&#x44F; &#x43F;&#x440;&#x43E;&#x441;&#x442;&#x440;&#x430;&#x43D;&#x441;&#x442;&#x432;&#x430; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     */
    only(eventspace) {
        return new Promise(resolve =&gt; {
            if (eventspace &amp;&amp; !Array.isArray(eventspace))    {throw new TypeError (&apos;Eventspace should be an array!&apos;)}

            this._event_types_listening.current.clear();

            this._event_types_listening.current = new Set(
                [...this._event_types].filter(Dispatcher.getFilterByEventspace(eventspace))
            );

            resolve();
        });
    }

    /**
     * &#x41F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x442;&#x44C; &#x432;&#x441;&#x435; &#x442;&#x438;&#x43F;&#x44B; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;, &#x43A;&#x440;&#x43E;&#x43C;&#x435; &#x437;&#x430;&#x434;&#x430;&#x43D;&#x43D;&#x44B;&#x445;
     *
     * TODO
     * @param eventspace {string} &#x438;&#x43C;&#x44F; &#x43F;&#x440;&#x43E;&#x441;&#x442;&#x440;&#x430;&#x43D;&#x441;&#x442;&#x432;&#x430; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     */
    aside(eventspace) {

    }

    /**
     * TODO: tests
     *
     * @deprecated
     */
    allowAll() {
        this._denied = false;

        this._deny_excepts = new Set();
    }

    /**
     * &#x417;&#x430;&#x43F;&#x440;&#x435;&#x442; &#x43D;&#x430; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x43B;&#x44E;&#x431;&#x43E;&#x433;&#x43E; &#x442;&#x438;&#x43F;&#x430; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     *
     * TODO: tests
     *
     * @deprecated
     */
    denyAll(eventspace_excepts) {
        this._deny_excepts = new Set(
            [...this._event_types].filter(Dispatcher.getFilterByEventspace(eventspace_excepts))
        );

        this._denied = true;
    }

    /**
     * &#x412;&#x44B;&#x433;&#x440;&#x443;&#x437;&#x438;&#x442;&#x44C; &#x43E;&#x442;&#x43B;&#x430;&#x434;&#x43E;&#x447;&#x43D;&#x44B;&#x435; &#x437;&#x430;&#x43F;&#x438;&#x441;&#x438; &#x432;&#x441;&#x435;&#x445; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x435;&#x439; &#x432; &#x435;&#x434;&#x438;&#x43D;&#x44B;&#x439; JSON-&#x43E;&#x431;&#x44A;&#x435;&#x43A;&#x442;
     *
     * @param {boolean} flush &#x43E;&#x447;&#x438;&#x449;&#x430;&#x442;&#x44C; &#x431;&#x443;&#x444;&#x435;&#x440; &#x43F;&#x43E;&#x441;&#x43B;&#x435; &#x432;&#x44B;&#x433;&#x440;&#x443;&#x437;&#x43A;&#x438;
     */
    dumpLogs(flush) {
        return new Promise(resolve =&gt; {
           let logs = [];

            for (module of this._modules) {
                logs.push(module.getDebugBuffer(flush));
            }

            resolve(logs);
        });
    }

    /**
     * &#x412;&#x44B;&#x437;&#x432;&#x430;&#x442;&#x44C; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x435; &#x432;&#x440;&#x443;&#x447;&#x43D;&#x443;&#x44E;
     *
     * @param {string} name &#x43D;&#x430;&#x437;&#x432;&#x430;&#x43D;&#x438;&#x435; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;
     * @param {Object} data &#x434;&#x430;&#x43D;&#x43D;&#x44B;&#x435; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;
     */
    call(name, data) {
        this._getHandler(name)(data);
    }

    /**
     * &#x412;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x442;&#x438;&#x442;&#x44C; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44E;-&#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A; &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x43E;&#x433;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x442;&#x438;&#x43F;&#x430; name
     *
     * &#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C;&#x43E;&#x435; &#x43F;&#x43E;&#x432;&#x435;&#x434;&#x435;&#x43D;&#x438;&#x435;:
     *     - &#x415;&#x441;&#x43B;&#x438; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x435; &#x432;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D;&#x43E; &#x432; &#x441;&#x43F;&#x438;&#x441;&#x43E;&#x43A; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445;, &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x43C;&#x430;&#x44F; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x432;&#x44B;&#x437;&#x44B;&#x432;&#x430;&#x435;&#x442; &#x435;&#x433;&#x43E; &#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A;
     *     - &#x415;&#x441;&#x43B;&#x438; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x43D;&#x435;&#x442; &#x432; &#x441;&#x43F;&#x438;&#x441;&#x43A;&#x435; &#x43F;&#x440;&#x43E;&#x441;&#x43B;&#x443;&#x448;&#x438;&#x432;&#x430;&#x435;&#x43C;&#x44B;&#x445;, &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x43C;&#x430;&#x44F; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x432;&#x44B;&#x432;&#x43E;&#x434;&#x438;&#x442; &#x43F;&#x440;&#x435;&#x434;&#x443;&#x43F;&#x440;&#x435;&#x436;&#x434;&#x435;&#x43D;&#x438;&#x435;
     *     - &#x41F;&#x440;&#x438; &#x43D;&#x435;&#x43F;&#x440;&#x430;&#x432;&#x438;&#x43B;&#x44C;&#x43D;&#x43E;&#x43C; &#x442;&#x438;&#x43F;&#x435; &#x430;&#x440;&#x433;&#x443;&#x43C;&#x435;&#x43D;&#x442;&#x430; &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x43C;&#x430;&#x44F; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x432;&#x44B;&#x431;&#x440;&#x430;&#x441;&#x44B;&#x432;&#x430;&#x435;&#x442; &#x438;&#x441;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D;&#x438;&#x435; &#x441; &#x441;&#x43E;&#x43E;&#x431;&#x449;&#x435;&#x43D;&#x438;&#x435;&#x43C; &#x43E;&#x431; &#x43E;&#x448;&#x438;&#x431;&#x43A;&#x435;
     *
     * @param   {string}    name          &#x442;&#x438;&#x43F; &#x441;&#x443;&#x440;&#x440;&#x43E;&#x433;&#x430;&#x442;&#x43D;&#x43E;&#x433;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;
     *
     * @returns {function}  &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F;-&#x43E;&#x431;&#x440;&#x430;&#x431;&#x43E;&#x442;&#x447;&#x438;&#x43A; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; / &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F;, &#x432;&#x44B;&#x431;&#x440;&#x430;&#x441;&#x44B;&#x432;&#x430;&#x44E;&#x449;&#x430;&#x44F; &#x438;&#x441;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D;&#x438;&#x435;
     * @private
     */
    _getHandler(name) {
        if (typeof name !== &quot;string&quot;)
            return function() {throw new TypeError(&quot;Dispatcher._getHandler(): Name is not a string!&quot;)};

        let allow = false;

        if (this._denied) {
            /// &#x435;&#x441;&#x43B;&#x438; &#x432;&#x43A;&#x43B;&#x44E;&#x447;&#x451;&#x43D; &#x437;&#x430;&#x43F;&#x440;&#x435;&#x442;
            if (this._deny_excepts.has(name)) {
                /// &#x435;&#x441;&#x43B;&#x438; &#x435;&#x441;&#x442;&#x44C; &#x438;&#x441;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D;&#x438;&#x44F;
                allow = true;
            }
        } else {
            /// &#x435;&#x441;&#x43B;&#x438; &#x432;&#x44B;&#x43A;&#x43B;&#x44E;&#x447;&#x435;&#x43D; &#x437;&#x430;&#x43F;&#x440;&#x435;&#x442;
            if (this._event_types_listening.always.has(name) || this._event_types_listening.current.has(name)) {
                allow = true;
            }
        }

        if (allow) {
            if (name in this._handlers) {
                return this._handlers[name];
            } else {
                return function(data) {console.warn(&quot;Dispatcher._getHandler(): handler for &quot;, name, &quot; was not defined, data:&quot;, data)};
            }
        } else {
            return function(data) {console.warn(&quot;Dispatcher_getHandler(): Event listener &quot;, name , &quot;was disabled for a while, data:&quot;, data);}
        }
    }

    /**
     * &#x412;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x442;&#x438;&#x442;&#x44C; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440; &#x43F;&#x43E; &#x43C;&#x430;&#x441;&#x43A;&#x430;&#x43C; &#x442;&#x438;&#x43F;&#x43E;&#x432; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     *
     * &#x41C;&#x430;&#x441;&#x441;&#x438;&#x432; eventspace &#x43C;&#x43E;&#x436;&#x435;&#x442; &#x441;&#x43E;&#x434;&#x435;&#x440;&#x436;&#x430;&#x442;&#x44C; &#x43A;&#x430;&#x43A; &#x438;&#x43C;&#x435;&#x43D;&#x430; &#x442;&#x438;&#x43F;&#x43E;&#x432; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; &#x432; &#x440;&#x430;&#x437;&#x432;&#x451;&#x440;&#x43D;&#x443;&#x442;&#x43E;&#x43C; &#x432;&#x438;&#x434;&#x435;, &#x442;&#x430;&#x43A; &#x438; &#x432; &#x432;&#x438;&#x434;&#x435; &#x43C;&#x430;&#x441;&#x43A;&#x438;.
     *
     * &#x41F;&#x440;&#x430;&#x432;&#x438;&#x43B;&#x430;:
     *     - `module:event1`    &#x43E;&#x437;&#x43D;&#x430;&#x447;&#x430;&#x435;&#x442; &#x442;&#x438;&#x43F; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; `event1` &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F; `module`
     *     - `module:*`         &#x43E;&#x437;&#x43D;&#x430;&#x447;&#x430;&#x435;&#x442; &#x432;&#x441;&#x435; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F; `module`
     *     - `*`                &#x43E;&#x437;&#x43D;&#x430;&#x447;&#x430;&#x435;&#x442; &#x430;&#x431;&#x441;&#x43E;&#x43B;&#x44E;&#x442;&#x43D;&#x43E; &#x432;&#x441;&#x435; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;
     *
     * &#x422;&#x435;&#x441;&#x442;&#x438;&#x440;&#x443;&#x435;&#x43C;&#x43E;&#x435; &#x43F;&#x43E;&#x432;&#x435;&#x434;&#x435;&#x43D;&#x438;&#x435;:
     *     - &#x412;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x43C;&#x430;&#x44F; &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x434;&#x43E;&#x43B;&#x436;&#x43D;&#x430; &#x43E;&#x441;&#x442;&#x430;&#x432;&#x43B;&#x44F;&#x442;&#x44C; &#x432; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x443;&#x44E;&#x449;&#x435;&#x43C;&#x441;&#x44F; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432;&#x435; &#x442;&#x43E;&#x43B;&#x44C;&#x43A;&#x43E; &#x442;&#x435; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x44B;,
     *       &#x43A;&#x43E;&#x442;&#x43E;&#x440;&#x44B;&#x435; &#x437;&#x430;&#x434;&#x430;&#x43D;&#x44B; &#x441; &#x43F;&#x43E;&#x43C;&#x43E;&#x449;&#x44C;&#x44E; &#x441;&#x442;&#x440;&#x43E;&#x43A;, &#x441;&#x43E;&#x441;&#x442;&#x430;&#x432;&#x43B;&#x435;&#x43D;&#x43D;&#x44B;&#x445; &#x43F;&#x43E; &#x43F;&#x440;&#x430;&#x432;&#x438;&#x43B;&#x430;&#x43C;, &#x43F;&#x435;&#x440;&#x435;&#x447;&#x438;&#x441;&#x43B;&#x435;&#x43D;&#x43D;&#x44B;&#x43C; &#x432;&#x44B;&#x448;&#x435;,
     *       &#x432; &#x437;&#x430;&#x434;&#x430;&#x43D;&#x43D;&#x43E;&#x43C; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432;&#x435; &#x43C;&#x430;&#x441;&#x43E;&#x43A;
     *
     * @param eventspace        &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432; &#x43C;&#x430;&#x441;&#x43E;&#x43A; &#x442;&#x438;&#x43F;&#x43E;&#x432; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439;
     *
     * @returns {function}      &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440; &#x434;&#x43B;&#x44F; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432;&#x43E;&#x432; (&#x441;&#x43C;. &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44E; Array.filter())
     */
    static getFilterByEventspace(eventspace) {
        return function(item) {
            /// &#x415;&#x441;&#x43B;&#x438; &#x43F;&#x440;&#x43E;&#x441;&#x442;&#x440;&#x430;&#x43D;&#x441;&#x442;&#x432;&#x43E; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x439; &#x441;&#x43E;&#x434;&#x435;&#x440;&#x436;&#x438;&#x442; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x443;&#x44E;&#x449;&#x438;&#x439; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;
            if (eventspace.includes(item)) {
                return true;
            }

            /// &#x414;&#x43B;&#x44F; &#x432;&#x441;&#x435;&#x445; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x43E;&#x432; &#x438;&#x437; &#x437;&#x430;&#x434;&#x430;&#x43D;&#x43D;&#x43E;&#x433;&#x43E; &#x43C;&#x430;&#x441;&#x441;&#x438;&#x432;&#x430;
            for (let i = 0; i &lt; eventspace.length; i++) {
                /// &#x42F;&#x432;&#x43B;&#x44F;&#x435;&#x442;&#x441;&#x44F; &#x43B;&#x438; &#x433;&#x440;&#x443;&#x43F;&#x43F;&#x43E;&#x432;&#x44B;&#x43C; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B;&#x43E;&#x43C;
                let is_wildcard = (eventspace[i] === &apos;*&apos;);
                /// &#x418;&#x43C;&#x44F; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F;, &#x435;&#x441;&#x43B;&#x438; &#x433;&#x440;&#x443;&#x43F;&#x43F;&#x43E;&#x432;&#x43E;&#x439; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &#x441;&#x442;&#x43E;&#x438;&#x442; &#x43F;&#x43E;&#x441;&#x43B;&#x435; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x44F;
                let module_name = Dispatcher._isWildcardAfterColon(eventspace[i]);
                /// &#x418;&#x43C;&#x44F; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F;, &#x435;&#x441;&#x43B;&#x438; &#x433;&#x440;&#x443;&#x43F;&#x43F;&#x43E;&#x432;&#x43E;&#x439; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &#x441;&#x442;&#x43E;&#x438;&#x442; &#x434;&#x43E; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x44F;
                let event_name  = Dispatcher._isWildcardBeforeColon(eventspace[i]);

                /// &#x415;&#x441;&#x43B;&#x438; &#x44F;&#x432;&#x43B;&#x44F;&#x435;&#x442;&#x441;&#x44F; &#x433;&#x440;&#x443;&#x43F;&#x43F;&#x43E;&#x432;&#x44B;&#x43C; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B;&#x43E;&#x43C;
                if ((is_wildcard)) {
                    return true;
                }

                /// &#x415;&#x441;&#x43B;&#x438; &#x433;&#x440;&#x443;&#x43F;&#x43F;&#x43E;&#x432;&#x43E;&#x439; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &#x441;&#x442;&#x43E;&#x438;&#x442; &#x43F;&#x43E;&#x441;&#x43B;&#x435; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x44F; &#x438; &#x441;&#x43E;&#x432;&#x43F;&#x430;&#x434;&#x430;&#x435;&#x442; &#x441; &#x438;&#x43C;&#x435;&#x43D;&#x435;&#x43C; &#x43C;&#x43E;&#x434;&#x443;&#x43B;&#x44F; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x443;&#x44E;&#x449;&#x435;&#x433;&#x43E; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x430;
                if ((module_name &amp;&amp; (module_name === item.split(&apos;:&apos;)[0]))) {
                    return true;
                }

                /// &#x415;&#x441;&#x43B;&#x438; &#x433;&#x440;&#x443;&#x43F;&#x43F;&#x43E;&#x432;&#x43E;&#x439; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &#x441;&#x442;&#x43E;&#x438;&#x442; &#x434;&#x43E; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x44F; &#x438; &#x441;&#x43E;&#x432;&#x43F;&#x430;&#x434;&#x430;&#x435;&#x442; &#x441; &#x438;&#x43C;&#x435;&#x43D;&#x435;&#x43C; &#x441;&#x43E;&#x431;&#x44B;&#x442;&#x438;&#x44F; &#x444;&#x438;&#x43B;&#x44C;&#x442;&#x440;&#x443;&#x44E;&#x449;&#x435;&#x433;&#x43E; &#x44D;&#x43B;&#x435;&#x43C;&#x435;&#x43D;&#x442;&#x430;
                if ((event_name &amp;&amp; (event_name === item.split(&apos;:&apos;)[1]))) {
                    return true;
                }
            }
        }
    }

    /**
     * &#x41F;&#x440;&#x43E;&#x432;&#x435;&#x440;&#x438;&#x442;&#x44C;, &#x441;&#x43E;&#x434;&#x435;&#x440;&#x436;&#x438;&#x442; &#x43B;&#x438; &#x43C;&#x430;&#x441;&#x43A;&#x430; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &apos;*&apos; &#x43F;&#x43E;&#x441;&#x43B;&#x435; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x44F;
     *
     * &#x415;&#x441;&#x43B;&#x438; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &#x435;&#x441;&#x442;&#x44C;, &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x442; &#x43F;&#x43E;&#x434;&#x441;&#x442;&#x440;&#x43E;&#x43A;&#x443; &#x43F;&#x435;&#x440;&#x435;&#x434; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x435;&#x43C;
     * &#x415;&#x441;&#x43B;&#x438; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B;&#x430; &#x43D;&#x435;&#x442;, &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x442; false
     *
     * @param   {string}            mask    &#x438;&#x441;&#x445;&#x43E;&#x434;&#x43D;&#x430;&#x44F; &#x43C;&#x430;&#x441;&#x43A;&#x430;
     *
     * @returns {boolean|string}    &#x441;&#x43E;&#x43E;&#x442;&#x432;&#x435;&#x442;&#x441;&#x442;&#x432;&#x443;&#x435;&#x442; &#x43B;&#x438; &#x43C;&#x430;&#x441;&#x43A;&#x430; &#x442;&#x440;&#x435;&#x431;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44E; / &#x43F;&#x43E;&#x434;&#x441;&#x442;&#x440;&#x43E;&#x43A;&#x430; &#x43F;&#x435;&#x440;&#x435;&#x434; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x435;&#x43C;
     * @private
     */
    static _isWildcardAfterColon(mask) {
        if (typeof name !== &quot;string&quot;)
            throw new TypeError(&quot;Dispatcher._isWildcard(): mask in not a string&quot;);

        if (mask.split(&apos;:&apos;).length === 1) {
            return false;
        }

        if (mask.split(&apos;:&apos;)[1] === &quot;*&quot;) {
            return mask.split(&apos;:&apos;)[0];
        }
    }

    /**
     * &#x41F;&#x440;&#x43E;&#x432;&#x435;&#x440;&#x438;&#x442;&#x44C;, &#x441;&#x43E;&#x434;&#x435;&#x440;&#x436;&#x438;&#x442; &#x43B;&#x438; &#x43C;&#x430;&#x441;&#x43A;&#x430; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &apos;*&apos; &#x43F;&#x435;&#x440;&#x435;&#x434; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x435;&#x43C;
     *
     * &#x415;&#x441;&#x43B;&#x438; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B; &#x435;&#x441;&#x442;&#x44C;, &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x442; &#x43F;&#x43E;&#x434;&#x441;&#x442;&#x440;&#x43E;&#x43A;&#x443; &#x43F;&#x43E;&#x441;&#x43B;&#x435; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x44F;
     * &#x415;&#x441;&#x43B;&#x438; &#x441;&#x438;&#x43C;&#x432;&#x43E;&#x43B;&#x430; &#x43D;&#x435;&#x442;, &#x444;&#x443;&#x43D;&#x43A;&#x446;&#x438;&#x44F; &#x432;&#x43E;&#x437;&#x432;&#x440;&#x430;&#x449;&#x430;&#x435;&#x442; false
     *
     * @param   {string}            mask    &#x438;&#x441;&#x445;&#x43E;&#x434;&#x43D;&#x430;&#x44F; &#x43C;&#x430;&#x441;&#x43A;&#x430;
     *
     * @returns {boolean|string}    &#x441;&#x43E;&#x43E;&#x442;&#x432;&#x435;&#x442;&#x441;&#x442;&#x432;&#x443;&#x435;&#x442; &#x43B;&#x438; &#x43C;&#x430;&#x441;&#x43A;&#x430; &#x442;&#x440;&#x435;&#x431;&#x43E;&#x432;&#x430;&#x43D;&#x438;&#x44E; / &#x43F;&#x43E;&#x434;&#x441;&#x442;&#x440;&#x43E;&#x43A;&#x430; &#x43F;&#x43E;&#x441;&#x43B;&#x435; &#x434;&#x432;&#x43E;&#x435;&#x442;&#x43E;&#x447;&#x438;&#x44F;
     * @private
     */
    static _isWildcardBeforeColon(mask) {
        if (typeof name !== &quot;string&quot;)
            throw new TypeError(&quot;Dispatcher._isWildcard(): mask in not a string&quot;);

        if (mask.split(&apos;:&apos;).length === 1) {
            return false;
        }

        if (mask.split(&apos;:&apos;)[0] === &quot;*&quot;) {
            return mask.split(&apos;:&apos;)[1];
        }
    }
}</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
