@import '../../colors';
@import '../../animations';

.cask {
  position: relative;
  overflow: hidden;

  width: 2em;
  height: 2em;
  line-height: 2em;
  border-radius: .375em;
  background-color: @text_light;
  color: @text_dark;

  box-shadow: @shadow;

  font-weight: 700;

  user-select: none;

  text-align: center;

  &_selected {
    background-color: @warning_surf;
  }

  &_active {
    cursor: pointer;

    transition: background-color .2s @fade,
                transform .2s @scale;

    &:hover {
      transform: scale(1.1);
    }

    &:active {
      transform: scale(1);
    }
  }

  &__content {
    position: absolute;
    width: 100%;

    &_disposable {opacity: 1};
    &_undisposable {opacity: 0};
  }

  &:hover &__content {
    &_disposable {
      opacity: 0;
    }

    &_undisposable {
      opacity: 1;
      animation: 1s scale-easeInElastic 0s reverse;
    }
  }

  &__progress {
    position: absolute;
    width: 100%;
    height: 100%;
    bottom: -100%;

    background-color: @default;

    transition: bottom .5s;

    &_primary    {background-color: @primary;}
    &_secondary  {background-color: @secondary;}
    &_success    {background-color: @success;}
    &_dark       {background-color: @dark;}
    &_warning    {background-color: @warning;}
    &_danger     {background-color: @danger;}
    &_light      {background-color: @light;}
    &_default    {background-color: @default;}
  }

  &_light      {background-color: @light;}
  &_default      {background-color: @default;}
}

@keyframes scale-easeInElastic {
	0% {transform: scale(1);}
	4% {transform: scale(1);}
	8% {transform: scale(1);}
	14% {transform: scale(1);}
	18% {transform: scale(1);}
	26% {transform: scale(1.01);}
	28% {transform: scale(1.01);}
	40% {transform: scale(0.98);}
	42% {transform: scale(0.98);}
	56% {transform: scale(1.05);}
	58% {transform: scale(1.04);}
	72% {transform: scale(0.87);}
	86% {transform: scale(1.27);}
	100% {transform: scale(0);}
}

@wave_width:  70%;
@wave_height: 60%;

@wave_right_right: -25%;
@wave_left_left:   -25%;
@wave_inv_left:     15%;

@wave_bottom:     44%;
@wave_inv_bottom: 95%;

@wave_bottom_down:     @wave_bottom     - 50%;
@wave_inv_bottom_down: @wave_inv_bottom - 50%;

@wave_anim_dur: 3s;



@wave_alt_right_right:  @wave_right_right - 25%;
@wave_alt_left_left:    @wave_left_left   + 25%;
@wave_alt_inv_left:     @wave_inv_left + 25%;

@wave_alt_bottom:         @wave_bottom + 4;
@wave_alt_inv_bottom:     @wave_inv_bottom + 4;

@wave_alt_bottom_down:     @wave_alt_bottom - 50%;
@wave_alt_inv_bottom_down: @wave_inv_bottom - 50%;

@wave_alt_anim_del: 1s;

@wave_transition: bottom .5s ease-in-out, opacity .5s ease-out;

.wavefront {
  &::before {
    content: '';
    position: absolute;
    width: @wave_width;
    height: @wave_height;

    bottom: @wave_inv_bottom;
    left: @wave_inv_left;

    background-color: @warning_surf;
    border-radius: 50%;

    transition: @wave_transition;
    animation: wave @wave_anim_dur infinite linear;
    animation-direction: reverse;
  }

  &_disabled&::before {
    opacity: 0;
  }

  &__wave {
    position: absolute;
    width: @wave_width;
    height: @wave_height;

    background-color: @warning_surf;
    border-radius: 50%;

    transition: @wave_transition;
    animation: wave @wave_anim_dur infinite linear;

    &_right {
      right: @wave_right_right;
      bottom: @wave_bottom;
    }

    &_left {
      left: @wave_left_left;
      bottom: @wave_bottom;
    }
  }

  &_disabled &__wave {
    bottom: @wave_bottom_down;
  }

  &_alt {
    opacity: .3;

    &::before {
      left: @wave_alt_inv_left;
      bottom: @wave_alt_inv_bottom;
      animation-delay: @wave_alt_anim_del;
      animation-direction: normal;
    }
  }

  &_alt&_disabled&::before {
    opacity: 0;
  }

  &_alt &__wave {
    &_right {
      right: @wave_alt_right_right;
      bottom: @wave_alt_bottom;
      animation-delay: @wave_alt_anim_del;
      animation-direction: reverse;
    }

    &_left  {
      left: @wave_alt_left_left;
      bottom: @wave_alt_bottom;
      animation-delay: @wave_alt_anim_del;
      animation-direction: reverse;
    }
  }

  &_alt&_disabled &__wave {
    bottom: @wave_alt_bottom_down;
  }

  &_primary    &__wave {background-color: @primary;}
  &_secondary  &__wave {background-color: @secondary;}
  &_success    &__wave {background-color: @success;}
  &_dark       &__wave {background-color: @dark;}
  &_warning    &__wave {background-color: @warning;}
  &_danger     &__wave {background-color: @danger;}
  &_light      &__wave {background-color: @light;}
  &_default    &__wave {background-color: @default;}
}


@keyframes wave {
  from { transform: rotate(0deg);}
  from { transform: rotate(360deg);}
}
